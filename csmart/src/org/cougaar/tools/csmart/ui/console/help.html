<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.76 [en] (WinNT; U) [Netscape]">
   <title>CSMART Console Help</title>
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000FF" vlink="#800080">

<h2>Experiment Controller</h2>
The Experiment Controller is used to control running an experiment. 
The Experiment Controller is enabled only when an experiment 
is selected in the workspace.
The Experiment Controller allows the user to run through all Trials
automatically, to stop after a Trial completes, or to abort a Trial.
Trials are defined in the Experiment Builder.
A Trial is one "run" of a Society with all Unbound Properties bound
to one set of values as specified in the Experiment Builder.<br>  
<i>Note: Experiments from the database do not use Societies with Unbound Properties; these experiments 
have one trial, and the user interface is simplified accordingly.</i>
<p>The Experiment Controller also collects and displays all output from the nodes in the experiment, and provides several facilities for automatically and manually searching this ouput, and notifying the user of error conditions.
<p>Note that you must separately launch the AppServer on each host used in
the experiment. See the installation instructions for running the Server.
<br>
<br>
A typical usage would be to <ol>
<li>Start the AppServers.</li>
<li>Set the Node output <a href="#FILTER">filters</a>, <a href="#VSIZE">view buffer size</a>, and
<a href="#Notify">notifications</a>.</li>
<li>Start the Experiment</li>
<li>Monitor the Node's output</li>
<li><a href="#GLS">Publish</a> the OPLAN and send GLS Root</li>
<li>Launch the Society Monitor</li>
</ol>
<p>
<b>Controlling the Experiment</b>
<ul>
<li>
Select the "Run" button to run an experiment.</li>
<li>
Select the "Stop" button to stop a trial in an experiment.
If the Society in the Experiment is configured to stop automatically
at the end of each trial, then this merely stops the experiment
at the end of the current trial.
If the Society is not configured to stop automatically, as in the
supplied database societies, 
then this stops the current trial immediately.
</li>
<li>
Select the "Abort" button to abort the trial, ending it immediately.</li>
</ul>
<p>
<b>Information from a Running Experiment</b>
<br>When you start an experiment, a window is created to capture the
output of each Node.  
The Node's window displays information about a node in a running experiment; a brief description of the Node's status can also be displayed by selecting that Node's &quot;Node Status&quot; button.
<ul>
<li>
The Node's window displays the standard output and standard error channels from each node in the experiment, together with some additional specific event information (Node created, Node destroyed, Agent added).
Output is displayed in black, and errors are displayed in red.  This
output can be filtered using the <a href="#FILTER">global
filters</a>.  The full output of the node is captured in a per-node
<a href="#Info">log file</a>.</li>
<li>
<a NAME="NodeStatusButton">The Node Status button</a> (a colored circle following the &quot;Node Status&quot; label near the top of
the Experiment Controller) illustrates the node status. The color
of the circle indicates the relative load on the node (how busy or idle it is);
an exclamation mark in the circle indicates an error condition.
The circle corresponding to the currently selected Node is outlined in black.
Clicking the right mouse button over the Node Status button displays a menu with the following options:
<ul>
<li>
Information: Information about the node and the host on which it is running.
</li>
<li>
Reset: Reset (remove) the error mark on the button.  Continue scanning the output from the Node for new error conditions.
</li>
<li>
Legend: A legend explaining the colors of the Node Status button.
</li>
</ul>
</ul>
In addition, the Configuration and "Trial Values" windows
present non-editable views of information about the Trial.  The Configuration
window displays the Host-Node-Agent configuration which was specified in
the Experiment Builder.  The "Trial Values" window displays all the values being
used in the current Trial; this is a combination of the properties specified
in the Configuration Builder and the Trial values specified in the Experiment
Builder.  This window is not displayed if there were no Unbound Properties specified in the Experiment.
<p>
The progress bar indicates the number of trials that have been run, as
a percentage of the number of trials defined for the experiment in the
Experiment Builder.
The Trial time indicates the time that the Trial has been running.
The Experiment time indicates the total time that the Experiment has
been running.
The progress bar and trial time are not displayed for experiments with one
trial.
<h3>Saving Experiment Results</h3>
The Experiment Controller saves the Node output into per-node log
files, and retrieves any generated results from all the hosts used in the
Experiment and stores these by default in the COUGAAR_INSTALL_PATH/results folder.
To change the location for storing results, use the CSMART File menu, "Save New Results in..." menu item.
For a description
of the Experiment results hierarchy, see the Help information for the
Performance Analyzer.
<h3>Experiment Controller Menus</h3>
The Experiment Controller menus are as follows:
<ul>
<li>File</li>
<ul>
<li>Exit: Close the Experiment Controller.</li>
</ul>
<li><a NAME=View>View</a></li>
<ul>
<li><a NAME="VSIZE">Set View Size</a>: Set the number of characters
displayed in each node's window, or select "all" to display all the
output from the node.  For efficiency, select a reasonable number of
characters to display.  The entire output from each node is always
available in the <a href="#Info">log file</a>.</li>
<li><a NAME="FILTER">Filter</a>: Select the types of messages that are
written in the node's window.  For efficiency, select only the
messages that are important.  The entire output from each node is
always available in the log file. The full path of the log file is
displayed using the <a href="#Info">Node Info</a> menu in the Node
Windows menu.</li> The types of messages that can be displayed are:
<ul>
<li>Standard Output: Output written on the standard output stream.
</li>
<li>Standard Error: Output written on the standard error stream.
</li>
<li>Node Created: The node was created.
</li>
<li>Node Destroyed: The node process was killed.
</li>
<li>Agent Added: An agent was added to the Node.
</li>
<li>Idle: Controls the color of the Node Status button and provides data for the Utilization History graph (which can be displayed from the Node Window Menu).
</li>
<li>Heartbeat: An "@" written periodically to indicate that the Node is running.
</li>
</ul>
</ul>
In future, you may also be able to filter by Log4J logging level.<br>
<li><a NAME="Notify">Notify</a>
<br>This menu allows users to set up "Notifications".  CSMART
automatically scans all output from all nodes searching for the notify
conditions set by the user.  If a notification condition is detected,
an exclamation mark is displayed in the <a
href="#NodeStatusButton">Node's status button</a>.  Output is scanned
starting at the time that the notification is set.    Notify
conditions can be either a specified string, or any output on Standard
Error.  Note that notification strings are case <i>in</i>sensitive.
Thus, for example, the user could ask for a notification, if
the Node writes the string "not found". Notifications set here can be
overridden by specific notifications set in each node's window.
Initially, the notification string is set to "exception" so that any
exceptions caught at a Node will trigger a notification.</li>
<ul>
<li>Set Notification: Set the string on which to be notified; optionally ask to be notified for all output on Standard Error.</li>
<li>View Notification: View the current notify string.</li>
<li>Remove All Notifications: Remove all notify conditions.</li>
<li>Reset All Notifications: Reset the error marks in the Node Status
buttons, and continue to search for notify conditions, starting with
any <i>new</i> output from the nodes.</li>
</ul>
<li>Help</li>
<ul>
<li>About Experiment Controller: Display this document.</li>
<li>About CSMART: Display an overview of CSMART.</li>
<li>Legend: Display a legend showing the colors used in the <a href=#NodeStatusButton>Node Status buttons</a>.
</ul>
</ul>
<h3>Node Window Menus</h3>
The Node Window menus are as follows:
<ul>
<li>Node</li>
<ul>
<li><a NAME="Info">Info</a>: Displays information about the node and
the machine on which it is running.  Displays the name of the log
file, which can be easily cut and pasted into a text editor.  Displays
the host location and description and the node description; this
information can be added to the host and node in the Experiment
Builder. Also shows the command line arguments and agents configured to run on the Node.</li>
<li>Machine CPU Usage: Displays CPU usage for all processes on the machine on which the node is running.  (This information is not supported for Windows machines.)</li>
<li>Node CPU Usage: Displays CPU usage for the Node's processes and child processes.  (This information is not displayed for Windows machines.)</li>
<li>Utilization History: Displays a graph of the relative load at the node, over time.</li>
</ul>
<li>Edit: Edit the text in the node window.</li>
<ul>
<li>Cut: Remove selected text and put it on the system clipboard.</li>
<li>Copy: Copy the selected text to the system clipboard.</li>
<li>Paste: Paste text from the system clipboard, at the cursor location.</li>
<li>Select All: Select all the text in the node window.</li>
<li>Find: Find the specified string in the node window; sets the cursor at the end of the string and highlights the string.</li>
<li>Find Next: Find the next instance of the string specified in "Find".</li>
</ul>
<li>View: These menu items are the same as in the Experiment Controller menus, but control the view for the specific node.  See <a href=#View>View menu.</a></li>
<ul>
<li>Set View Size</li>
<li>Filter</li>
</ul>
<li>Control</li>
<ul>
<li>Stack Trace: Causes the node to print a stack trace; this is
displayed in the standard output in the node window.  (This is not
supported for Windows machines.)</li>
<li>Kill: Kill the selected Node.</li>
<li>Restart: Restart the Node, if it has died.  If you have persistence turned on, the Node will start where it left off.</li>
</ul>
<li>Notify: These menu items are the same as in the Experiment Controller menus, but set notifications for the specific node.  See <a href=#Notify>Notify menu.</a></li>
<ul>
<li>Set Notification</li>
<li>Remove Notification</li>
<li>Find Next Notification</li>
<li>Reset Notification</li>
</ul>
</ul>
<h3><a NAME="GLS">GLS and OPLAN UI</h3>
In related societies, a window will pop up in the CSMART Console for
publishing an Oplan, and sending or rescinding the GLS Root task. This
interface uses a servlet to communicate with the command node (usually
NCA). To use this interface:
<ul>
<li>Wait for the Node creation to quiesce.</li>
<li>Hit the "Connect" button, and</li>
<li>then immediately the "Publish OPLAN"
button.</li>
<li>Wait for the OPLAN publishing work to quiesce.</li>
<li>Publish GLS Root</li>
<li>You may then rescind that task, or publish another</li>
</ul>
<br>
<h3>Notes:</h3>
If this error message is displayed:
<pre>Cannot create node on hostname; check that server is running</pre>
then ensure that all hosts are referenced by full IP address or fully qualified
machine name. Also, in some cases, it appears that Solaris machines fail
to contact the NameService on Win32 machines.
<p>Also, errors in the <i>server</i> server console window, such as: "RMI Exception: Class not found", or "RMI Exception: no RMI class
loader", usually indicate a classpath problem. Be sure that both server.jar
and csmart.jar are on the classpath used to run the server, the classpath
defined in the server properties file, and in the classpath for running
CSMART.<br>
<p>In general, most errors running societies can be traced to one of
the following:<br>
<ul><li>Firewall issues between CSMART machine and Node machines</li>
<li>DNS problems on Node machines - be sure you can nslookup and
reverse nslookup each machine name.</li>
<li>AppServer not running, or Node machine has wrong version of
Cougaar.</li>
<li>Node machine has incorrect cougaar.rc or other data file</li>
<li>Experiment changes made in CSMART were not saved to the
database.</li>
</ul>
<br><br>
<!-- hhmts start -->
Last modified: Wed Feb 13 14:53:47 EST 2002
<!-- hhmts end -->
</body>
</html>
