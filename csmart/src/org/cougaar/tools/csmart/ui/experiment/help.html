<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <title>CSMART Experiment Builder Help</title>
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000FF" vlink="#800080">

<h2>Experiment Builder</h2>
Use this tool to build an experiment,
in particular, to add recipes to an experiment, to 
allocate agents across nodes, hosts, and communities, and
to set run-time command line arguments.<br><br>
Recipes modify the behavior of the society in the experiment in various ways (collect run-time statistics, add simulated behaviors, etc.).  
To add a recipe to your experiment, create the recipe in your workspace,
and drag it into the Recipes folder in the Experiment Builder. 
Note that all 
changes to your experiment are saved automatically in your workspace
and in the database. Since experiment definitions are saved in the
database, they may be easily re-used later from other client
machines.
Experiments which have not been saved (particularly, experiments that contain
societies or recipes that have been changed in the Configuration Builder)
are displayed in the workspace in red.  Unsaved experiments cannot be run.
<br><br>
<h3>Recipes</h3>
An experiment can contain any number of recipes.  Recipes are defined
modifications to a society, and will be applied in the order in which they
are listed under the Recipes folder. (You may re-order them by
dragging and dropping. Drop a recipe on the folder and it is added
last. Drop a recipe on another recipe and it is inserted before that
other recipe.) By default, 1AD experiments from the database include several recipes  to support
Agent mobility, communities, and to include
all basic servlets, but
users may remove these recipes and include any other they prefer.  Note
however, that some servlets support the Society Monitor; removing
these servlets will make it impossible for the Society Monitor to
collect information from the society blackboard.  

<h4>Component Recipes</h4>
Component Recipes provide the ability to add a new component to a specific set
of agents within a society.  For more information on Component Recipes,
see the documentation for a specific Component Recipe (Specific Insertion, Agent Insertion, Servlet Group Insertion, etc.).
<h4>Metrics Recipes</h4>
Using the Experiment Builder, users can specify the
exact set of run-time performance measurements which they wish to collect
during their experiment, when to collect them, and from which points in
their society. By metrics, we mean such performance-related statistics
as CPU usage, memory utilization, bandwidth usage, Tasks propagated, etc.
Typically, these statistics come from the core Metrics Service. In future,
they will also come from the QuO run-time kernel service, or other
user-specified sources.
<br><br>As the society runs, these metrics are typically recorded in
results files (one per agent). Use the <a
href="../analyzer/help.html">Performance Analyzer</a> to retrieve
these results files for client-side analysis. As the society runs,
periodic statistic snapshots are collected, and written to a tab
separated value text file (one file per agent). See <a
href="../../recipe/basic-metric-help.html">Basic Metric Help</a> for
detailed metrics collection information. 
<h4>Impact Recipes</h4>
Use the Experiment Builder to include a set of simulated external impacts
in your experiment. While currently disabled, to include these in future, create a new ABC Impact in the workspace
organizer, and drag it into the Recipes folder. 
For details on the ABC Impact external impacts, and creating your own
external impacts, see the Users' Guide.
<br>&nbsp;
<h3>Using the Experiment Builder</h3>
The following explains the usage of each of the tabbed panes:
<h4>Properties</h4>
To include a society or recipe in your experiment, create a society or 
recipe in your 
workspace and drag it into the Society or Recipes folder in the
tree. You may also drag multiple recipes into your experiment at once,
by ctrl- or shift-click selecting them in your workspace.
(Note that societies are automatically created in the workspace when
you load an experiment from the database.) Note that you cannot add
the same recipe to an experiment twice. You also cannot have two
Agents (including Node Agents, so therefore Nodes) with the same name
in any configuration, so some recipe additions will be rejected. <br><br>
To remove a recipe from the experiment, position the mouse over the recipe in the tree and click the
right mouse button; a pop-up window will be displayed allowing you to remove
the recipe. To remove all recipes, use the pop-up menu on the Recipes folder.
To change the order in which recipes are applied, drag and drop
recipes within the Recipes folder. Drop a recipe on
the folder and it is added last. Drop a recipe on another recipe and it is inserted before that other recipe.
<h4>Configurations</h4>
The configuration of Hosts, Unassigned Nodes, and Unassigned Agents
can be modified using Configure (and Find) menu items, pop-up menus or by drag-and-drop. Agents can be dropped
on nodes; nodes can be dropped on hosts. Create, delete, and rename hosts
and nodes by using the appropriate Configure menu option, or right clicking on a host or node to display a pop-up menu
with these options. Agents are created by societies or recipes and cannot be created,
deleted or renamed in the Experiment Builder. Unassigned Agents are
agents not yet assigned to a node.  You may also view the complete
contents of a Node (and its Node Agent) or an Agent, by selecting the
"Show Components" item from the pop-up menu on that object.

<ol>
<li>
In the Hosts tree, create an entry for each host to be used in the experiment.
An entry for a host can be created:

<ul>
<li>
By adding the host name to the hosts.txt file in the directory from which
CSMART is launched, or</li>

<li>
By clicking the right mouse button over the "Hosts" folder.
A pop-up menu is displayed; select "New Host" from this menu.
A pop-up dialog is displayed in which to enter the name of the host. The same command is available from a Configure menu item.</li>

<li>
Note that hosts named "localhost", or host names that do not include the
full domain name (ie cougaar.org), sometimes fail (due to an RMI bug).
The error message:<br>

<pre>!Waiting for //127.0.0.1:8888/NameService!.!.!.</pre>
usually indicates a problem in specifying the host name. Try using an IP address or fully qualified
host name.</li></ul></li>

<li>
Create a node or nodes for each host to be used in the experiment. The full set of node names defined in the Experiment is displayed in the unassigned window by default.  You may use one of these, or create a new one.  For a new node name, use the Configure menu item, or click
the right mouse button over the host folder in the "Hosts" tree, and select
"New Node" from the menu. A pop-up dialog is displayed in which to enter
the name of the node.</li>

<li>
Assign agents to nodes. Drag and drop agents from the "Unassigned Agents"
tree to the nodes created in the previous step. To select a group of agents,
left click on the first agent to select, and shift left click on the last
agent. New in 9.2.1, it is possible to run a Node without any Agent
assigned to it. This is useful for, among other things, Agent Mobiility.</li>
</ol>
<p>
 Using the pop-up or Configure menus, additional information can be
 added to the host and node. This information includes: Host
 Description, Host Type, Host Location, Node Description, Global
 Command Line Arguments, and Command Line Arguments. This information
 can be displayed using the Info menu item on the Node menu in the
 node window in the Experiment Controller.
</p>
<p>
<p><b>Importing / Exporting Host, Node, Agent Mappings</b></p>
<p>The experiment builder provides the ability to import and export Host, Node, and
Agent (HNA) Mappings.  This allows the preservation of large mappings across
multiple versions of CSMART and databases.  When an HNA Map is exported,
it is stored in an XML file that can then be imported into new or future
experiments.  The XML file can also be edited by hand, before re-importing it.
</p>
<p>
To use this feature, create an experiment, as explained in this help file.
After the desired mappings are configured, with all hosts, nodes and agents
assigned, select "Export HNA" on the "Configure" menu.  This saves the HNA mapping
to a file located beneath the results directory, or in a directory starting with
the current experiment name, in "csmart/bin/".</p>
<p>To use a previously exported mapping, load the desired experiment from the
database.  Once loaded, open the experiment builder and select "Import HNA" 
from the "Configure" menu.  This will re-create all the mappings stored in the
file.  If the stored file contains agents that are not part of the new 
experiment, the agent in the file is ignored.  
</p>
<p>
<p><b>Setting Command Line Arguments</b></p>
 The command line arguments are passed as -D options and command line arguments to the
 node when it is run and so directly affect how the nodes of the
 society are run. CSMART sets a number of such arguments by default.
 See the Cougaar documentation for an explanation of these values, and
 a list of other possible arguments. <br><br>
The global command line and command line values both
 affect running the nodes of the society. Each node receives a
 combination of the global command line values and its own command
 line values. The node command line values override the global
 ones. Note that you cannot delete a global argument for only a single
 Node. To remove a global argument from a single Node, specify an
 empty value, or delete it from the Global arguments, and then add it
 to the nodes where you do want that value.<br><br>
You may also load a file of command line arguments, using the "Read
 from File" button in the "Command Line Arguments" dialog box. This
 file should be in standard Java Properties file format; the
 values loaded from the file will override any previous values specified in
 this window. <br><br>
Command line arguments set here will override or augment any
 values specified in the AppServer properties files (server.props).
 A few -D arguments are not editable. For a list of some of the
 Cougaar System properties that you might want to set, if you have
 installed the Cougaar javadoc ZIP in your Cougaar Install Path, select the
 "Cougaar Properties" menu item from the Help menu.<br>
<ul>
<li>
To set an environment variable, make the name "env.&lt;name&gt;".</li>
<li>To specify a JVM property, ie one that will be passed like
 "-&lt;name&gt;", set the name here to be "java.&lt;name&gt;", for
 instance, a name of "java.foo" will turn into "-foo".</li>
<li>All other names will become -D arguments.</li>
<li>If you want a -D argument named "java.something", name it here
 "java.java.something".</li>
</ul>
For further details, see the file "server/doc/README".<br><br>
Of particular note: the -D argument <code>java.class.name</code> indicates the
 class that will be executed by the AppServer. For standard Cougaar
 societies, this should be the Bootstrapper, and the default uses the
 Bootstrapper included in the bootstrap module. However, other
 Bootstrappers (for example, providing additional security) or other
 classes entirely, could be specified here. When using a Bootstrapper,
 the first argument to the running process must be the name of the
 class to run - <code>org.cougaar.core.node.Node</code> for standard
 Cougaar societies. This argument is specified in the first line of
 the non -D argument text box.<br>
The argument <code>org.cougaar.name.server</code> indicates where the
Cougaar Name Server will run. This defaults to the host on which the
first listed Node is running. It will be reset to this default if you
try to set it to a Host not in your experiment or which has no Node
running on it. You should only edit this argument from the Global
Command Line Arguments dialog.<br>
The arguments that begin <code>org.cougaar.configuration.</code> point
to the CSMART configuration database, so that the running society can
be initialized. These should be using the values as retrieved from
your cougaar.rc file and should not normally be modified.<br>
The argument <code>org.cougaar.experiment.id</code> is the key for
your society to use to initialize itself from the database, and cannot
be edited.<br>
The argument <code>org.cougaar.control.port</code> tells the Node what
port to listen on for control messages from the AppServer.<br>
The argument
<code>org.cougaar.tools.server.swallowOutputConnectionException</code>,
if true, tells the AppServer to keep the Node
running if CSMART should unexpectedly die.<br><br>
As of 9.2.1, you may include the
 string $HOST in a command line argument, and CSMART will substitute
 at runtime the name of the Host on which that Node is running (using
 the form of the name you specified within CSMART).<br><br>
When specifying program Arguments in the free text box at the bottom
 of the dialog, be sure to include each argument on a separate
 line.<br>
<b>Warning</b>: You <i>must</i> hit "Enter" after editing the name or
value of an Argument in order for your change to take effect,
<i>before</i> hitting the "OK" button to dismiss the dialog. After
making an edit the Experiment should be red in the Organizer, and
bringing up the same dialog again should show your changed value.<br>
</p>
Some File menu options support adding information to Hosts and Nodes,
purely for the user's benefit; these do not affect running the nodes.  These
options are: Describe Host, Describe Node, Type and Location.<br><br>
There are a number of other Configure menu options for further configuring
your Experiment. Note the File menu "Save" and "Save As" options
for ensuring your experiment changes are saved to the database. For
debugging the configuration of your experiment, you may use the
debugging File menu option to generate "ini" style configuration
files. This option generates a complete society specification in old
style configuration files. All information written here reflects what
will be run when the Nodes are created from the database. However
these files are not supported for running a society. In particular,
many database derived societies will reference OPLAN information that
remains solely in the CSMART database.<br>
<h4>Communities</h4>
This tab supports editing and viewing communities, their members, and
their attributes.  In general, the user should configure the
Host, Node, Agent (HNA) mappings and then use the Communities tab to assign
agents to communities.  The Communities display always shows the most
recent HNA mappings in the bottom right portion of the display. 
HNA mappings cannot be modified in the Communities display.<br><br>
<b>Displaying a Community</b>
Use the Display Community command on the Community menu to display a previously
defined community.<br><br>
<b>Creating a Community</b>
To create a community, 
right click on the root of the community tree or on a community within
the tree and select New Community from the pop-up menu, or
use the New Community command on the Community menu.
Assign agents to the community by dragging hosts, nodes or agents from
the Host-Node-Agent portion of the display on to the new communities.
When a host is dragged on to a community, all its nodes and agents are
added to the community.  When a node is dragged on to a community, it
is added to the community as an agent, and all its agents are added to
the community.  To remove a host, node or agent from a community, click
the right mouse button over its name in the community tree, and select
Delete from the pop-up menu.  Note that this simply removes the agent
or agents from the community; it does not delete the agent or agents
from the experiment, or affect the HNA mapping.<br>
You may also jump-start your community definitions by importing a
communities.xml file, by selecting the Import option from the root
"Community" node pop-up menu. See the community module for
documentation and a sample XML file. <br><br>
<b>Community Table Display</b>
The table displays attribute ids and values
for the entity selected in the community tree.  For agents, the
agent's attribute ids and values are displayed.  For nodes, the
attribute ids and values of all its agents are displayed.  For hosts, 
the attribute ids and values of all its node agents are displayed.
To display all information for a community, right click on the community
name in the community tree, and select Show All Parameters.<br><br>
<b>Modifying Community and Agent Attributes</b>
<ul>
<li>To add a parameter, right click over the community or agent to which
to add the parameter in the community tree, and select Add Parameter from
the pop-up menu.  A new empty attribute id and value will be displayed in
the table and can be filled in the same as for modifying a parameter.</li>
<li>To modify a parameter, click in the table cell to be edited, and a list of
entries currently in that field will be displayed; either select from the list
or enter a new value.</li>
<li>To delete a parameter, right click over the entry in the
table and select Delete from the pop-up menu.</li>
</ul>
<h4>Threads</h4>
<p>
This tab displays the settings for Threads and Groups in this
Experiment, if applicable.  These were set in an earler dialog when the Experiment
was created, and cannot be edited here.

</p>
<br>
<!-- hhmts start --> Last modified: Wed Jun 12 15:21:44 EST 2002 <!-- hhmts end -->

</body>
</html>
