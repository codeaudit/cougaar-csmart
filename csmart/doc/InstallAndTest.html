<html>
<head>
<title>CSMART Installation and Getting Started HOW-TO</title>
</head>
<html>
<body bgcolor="white">

<p>
<center><h1>CSMART Installation and Getting Started HOW-TO</h1></center>
<p>
<p>
This document provides step-by-step instructions on how to install and run a 
single CSMART application.  See
  <a href="http://www.cougaar.org">http://www.cougaar.org</a>
for an overview of <a href="http://www.cougaar.org">Cougaar</a>
and the &quot;<a href="http://www.cougaar.org/documents/pdg.html">Cougaar
Developers Guide</a>&quot;.  Also see the 
<a href="http://www.cougaar.org/projects/csmart/csmart-users-guide.pdf">
CSMART User Documentation</a> for a full descriptiong of CSMART features and how to use them.
<p>
If you have questions then email:
  <a href="mail:cougaar-support@cougaar.org">cougaar-support@cougaar.org</a>.
<p>
These notes are focused for Unix prompts, (but the instructions are
very similar for WinNT) and a MYSQL database.
<p>

<p>
<hr>
<p>

<font size=+2><b>Contents and Overview:</b></font>
<ol>
  <li><a href="#machineReqs">Machine Requirements</a>.<br>
    Covers basic requirements, such as JDK 1.3.1 and JSSE.</li><p>

  <li><a href="#dbInst">Database Installation</a>.<br>
    Covers installation and configuration of a 
    <a href="http://www.cougaar.org">Cougaar</a>
    configuration database</li><p>

  <li><a href="#cougaarInst">Cougaar Installation</a>.<br>
    Covers installation of
    <a href="http://www.cougaar.org">Cougaar</a>
    and 3rd-party jars, including minor modifications to 
    the file "LDMDomains.ini".</li><p>

  <li><a href="#cougaarEnv">Cougaar Environment Variables</a>.<br>
    Covers the meaning and setting of the "$COUGAAR_INSTALL_PATH" 
    environment variable.</li><p>

  <li><a href="#minitest">Simple "minitestconfig" Test Society</a>.<br>
    Shows how to run the small "minitestconfig" society to verify 
    that 
    <a href="http://www.cougaar.org">Cougaar</a>
    was correctly installed.</li><p>

  <li><a href="#httpVisuals">Browser-based Views of a Running Society</a>.<br>
    Shows how to run the HTTP-based visualizations (Tasks servlet, 
    Inventory Charts, etc).
    </li><p>

  <li><a href="#socMonitor">CSMART Monitor of a Running Society</a>.<br>
    Shows how to run the CSMART "Society Monitor" visualizations, which
    create graphical views of a running society.</li><p>

  <li><a href="#appServer">AppServer Configuration</a>.<br>
    Covers the installation of the AppServer, including the required
    modifications to the "Server" startup script and creating a "server.props" properties file.
    </li><p>

  <li><a href="#csmartConfig">CSMART Configuration</a>.<br>
    Covers the installation and setup of CSMART.
    </li><p>

  <li><a href="#csmartRun">Example Run of CSMART</a>.<br>
    Walks through a step-by-step run of CSMART, from experiment creation,
    running the experiment using the AppServer, to the final results
    analysis.</li><p>
</ol>

<p>
<hr>
<p>

<font size=+2><b>Sections:</b></font>

<p>
<ol>
<a name="machineReqs">
<li><font size=+1><b>To check your machine's requirements:</b></font></a>
  <p>
  Make sure you check your machine before proceeding with an
  installation!
  <p>
  <ol>
  <p>
  <li>Make sure that JDK 1.3.1 is installed.  This can be done using:
      <pre>
       java -version
      </pre>
    If the JDK is not installed, or you have an older version, then
    you must download a new release from:
       <a href="http://java.sun.com/j2se/1.3"
       >http://java.sun.com/j2se/1.3</a>.
    On some Linux machines this may require an upgrade of "glibc".<br><br></li>

  <li>Make sure you have the JSSE 1.0.2 (Java Secure Sockets Extension) jars
    in your JDK's path:
       <pre>
       ls $JAVA_HOME/jre/lib/ext
       </pre>
    Minimally this should list:
       <pre>
       jcert.jar  jnet.jar  jsse.jar
       </pre>
    If you lack these jars then download them from:
       <a href="http://java.sun.com/products/jsse"
       >http://java.sun.com/products/jsse</a>. <br><br>
       <b>Windows Note:</b> <i>Windows often installs JRE in 2 places: under JDK, and also 
       in C:\Program Files\JavaSoft\JRE, and both places need JSSE installed.</i><br><br>
    You may also need to modify the default JSSE security file (in
    JRE/lib/security/java.security), by adding the line:
    <pre>security.provider.3=com.sun.net.ssl.internal.ssl.Provider</pre><br></li>

  <li>If you require a local database (Oracle or MySQL) then you must
    install this database.  Currently CSMART has been fully tested on a MySQL database. See <a href="#dbInst">below</a> for instructions.
    <br><br></li>

  <li>If you are creating a distributed society (more than one machine), or you
    plan to run the CSMART UI from a remote machine, then you should first
    make sure that the machines can communicate with one another.  Checking for
    firewalls and private-networks in advance will save many headaches in the
    long run.  Note that RMI, HTTP and database interactions will be used between 
    the machines. Various other ports may possibly be used.
    Further details can be found in the release notes.  For most users this
    will not pose a problem.<br><br></li><p>

  <li>If you plan to run CSMART from a Windows machine and to control remote 
    machines that will create UI popups (No core plugins pop-up UI windows), 
    then you will need to install an "X-Server" such as
    <a href="http://www.hummingbird.com/products/nc/exceed/">Exceed</a>
     or <a href="http://xfree86.cygwin.com">XFree (install on cygwin, free)</a>.
    </li>
  </ol>
</li><p>

<br>

<a name="dbInst">
<li><font size=+1><b>To install a configuration database:</b></font></a>
  <p>
   A database is required to run the larger
   <a href="http://www.cougaar.org">Cougaar</a>
   societies and to run CSMART.  Typically a MySQL, Oracle, or 
   PostGreSQL database is used. Only MySQL is currently supported for CSMART.
   A single database can be shared with other CSMART users, but you
   must first arrange access to the database --
   these notes detail how to create your own database and <a href="../../doc/details/DataAccess.html">cougaar.rc</a>
   password file.
   <p>
   See <a href="../../doc/details/HeterogeneousDatabase.html">the database writeup</a> for detailed 
   documentation on database installation.  You may want to read
   that file before continuing with the example MySQL installation
   below.
   <p>
   <a name="mysqlWarning"></a>
   These notes highlight a basic installation for MySQL.  You 
   <b>MUST</b> refer to the MySQL documentation for proper
   installation and security documentation!
  <ol>
  <p>

  <li>Download and install MySQL from 
    <a href="http://www.mysql.com/">http://www.mysql.com/</a>.
    Version "3.23" will work.<br><br>
    <b>Linux Note:</b> <i>Be sure to use 3.23.45 or better.  Earlier versions contain a bug with table name cases.</i><br><br> 
    For security reasons, be sure to change the default users' passwords.<br><br></li><p>

  <li>You must set a MySQL variable to force table names to be
  lowercase. On Windows, this is the default. But you must set it
  explicitly for Unix based systems (and it won't hurt on Windows). On Unix, create
  a file "/etc/my.cnf" ("C:\my.cnf" on Windows). In this file, in the
  "mysqld" section, you must add a line, as follows:<pre>
  [mysqld]
  set-variable   =   lower_case_table_names=1
  </pre>
  Then you must restart your MySQL server. This will ensure that when
  you load tables into MySQL, and when you access them, all uppercase
  table names are converted to lowercase. If you see errors where
  tables like GEOLOC are claimed to be missing, this is a likely
  culprit.</li><br><br><p>

  <li>There are two MySQL database snapshots available. One to support
  the military logistics domain plugins, and one for the CSMART
  configuration database. These instructions will help with both, but
  for further details on the plugin database, see the release <a
  href="../../doc/index.html">documentation</a> for details.  Load the
    <a href="http://www.cougaar.org">Cougaar</a>
    MySQL database snapshot from the file 
    "csmart/data/CMT-MySQL.ZIP" (after unzipping it).  For later reference when
    creating your <a href="../../doc/details/DataAccess.html">cougaar.rc</a>, suppose the database will be on host 
    "myhost".  Be sure you have started the database, using the
    appropriate "mysqld" executable. Here we name
    the database "mycoug":
      <pre>
        $ mysql -u root -p
	[supply root password set during installation]
        mysql&gt; create database mycoug;
        mysql&gt; exit;
        $ mysql -u root -p mycoug &lt; [CMT MySQL data dump, eg 1ad_dump_full.sql]
	[supply root password set during installation]
      </pre>
      <b>Note</b> If
	you have a previous database you wish to replace, the command
	to drop the old database first is "drop database
	mycoug;". However, most scripts will drop the old tables
	before loading the new, so this is not strictly
	necessary. <br><br></li><p>

  <li>Create a user for accessing the database. Here we create a user
  <i>myname</i> with password <i>mypass</i> who can only access the database
  locally (and therefore not useful for running a distributed Cougaar
  society). Note that the user must have select, insert, update, create,
  delete, and drop priviledges on the configuration database.
       <pre>
       $ mysql -u root -p
	[supply root password set during installation]
       mysql&gt; grant all on mycoug.* to <i>myname</i>@"localhost" identified by '<i>mypass</i>';
       mysql&gt; exit;
      </pre>
      You could instead create this user such that any machine in your
      domain can access it (with the security risks that entails), by
      doing: <pre><i>myname</i>@"%.foo.com"</pre>
  <br></li><p>

  <li>Once you have imported the CMT MySQL datafile, be sure to follow
  the same steps to import the Cougaar domain plugin MySQL database:
  <pre><a href="#cougaarEnv">$CIP</a>/dbms/data/mysql/mysqldump.8.6.txt</pre> 
  You may load this data into
  the same database as the CSMART data, or a different one, as you
  prefer. Just be sure to build your <a href="../../doc/details/DataAccess.html">cougaar.rc</a> file appropriately.
  Note that importing this database requires loading 2 files at least,
  with separate files for the "class 9" data. A recommended minimum is
  to also load:
  <pre><a href="#cougaarEnv">$CIP</a>/dbms/data/mysql/army.txt</pre>created by unzipping <pre><a href="#cougaarEnv">$CIP</a>/dbms/data/mysql/army_spares.zip</pre>
   Then you <em>must</em> also create indexes for that data, by loading (from the same directory):
  <pre>spares_index.txt</pre>
  Load all such files following the same instructions as above.<br><br></li><p>
      
  <li>The database is now ready.  You must now create a 
    <a href="../../doc/details/DataAccess.html">cougaar.rc</a>
    for the database users (<a href="http://www.cougaar.org">Cougaar</a>
    and CSMART), which is used to store the database location and
    username/password information.  See	
    <a href="../../doc/details/DataAccess.html">DataAccess</a> 
    and <a href="../../doc/details/HeterogeneousDatabase.html">the database writeup</a> 
    for detailed information.
    <br><br></li><p>

  <li>Copy your <a href="../../doc/details/DataAccess.html">cougaar.rc</a> to "/tmp" for later use during the installation
    of 
    <a href="http://www.cougaar.org">Cougaar</a>.  
    All installations must have this 
    <a href="../../doc/details/DataAccess.html">cougaar.rc</a> 
    to access your database.<br><br></li><p>
  </ol>
</li><p>

<p>

<a name="cougaarInst">
<li><font size=+1><b>To install <a href="http://www.cougaar.org">Cougaar</a>:</b></font></a>
  <p>
  These are notes for the installation
  <a href="http://www.cougaar.org">Cougaar</a>,
  CSMART, and the AppServer.  Also see the 
  <a href="../../doc/SocStartup-Config.html">Cougaar install notes</a> for similar
  installation notes and an explanation of the contents of a Cougaar installation.
  <p>
  <ol>
  <p>

  <li>First check your <a href="#machineReqs">machine's configuration</a> and <a href="#dbInst">install a database</a> (for use of the supplied military logistics plugins).
  <br><br></li><p>

  <li>Select a base directory for your install.  The typical choice is
    "/opt", but any directory will do.  Change to that directory:
       <pre>
       cd /opt
       </pre>
    Many of the following commands reference this default "/opt".  If you've
    selected a different directory then simply substitute the base-path 
    with your path.
  <br><br></li><p>

  <li>Create a directory for your "cougaar" installation.  One can 
    simply create a single "cougaar" directory, but if you expect to
    update versions frequently, you will want
    to create a directory tagged with the build's date and then use a
    symbolic link.  The convention is to use the current date (e.g. 
    "2001 Oct 26th") in a "YYYYMMDD" format and to create a tagged 
    directory:
       <pre>
       mkdir cougaar-20011026
       </pre>
    Then create a symbolic link to this directory:
       <pre>
       ln -s cougaar-20011026 cougaar
       </pre>
    This makes it easier to maintain multiple build versions and to
    still use the simple "/opt/cougaar" directory name to refer to the
    most recent installation.
  <br><br></li><p>

  <li>Change directory into your "cougaar" directory.
       <pre>
       cd cougaar
       </pre>
    Most of the commands for the remainder of this document assume that you
    start in the "/opt/cougaar" directory.  This path is later set as the
    "$COUGAAR_INSTALL_PATH" <a href="#cougaarEnv">environment variable</a>.
  <br><br></li><p>

  <li>Download <i>cougaar.zip</i> and <i>cougaar-support.zip</i> from 
    <a href="http://www.cougaar.org">http://www.cougaar.org</a>.
    Place these files in the current directory ("/opt/cougaar"), then
    unpack both files by using:
       <pre>
       unzip cougaar-support.zip
       unzip cougaar.zip
       </pre>
    Ignore any "overwriting file 'version.txt'" warnings.  Once
    unpacked you can (optionally) remove both ".zip" files:
       <pre>
       rm cougaar-support.zip cougaar.zip
       </pre></li><p>

  <li>(Optional step) The "cougaar-support" jars can often be shared across
    multiple 
    <a href="http://www.cougaar.org">Cougaar</a>
    installations, which is useful if you're a developer -- this will save
    you the download of "cougaar-support.zip".  To share a single "sys/" across 
    multiple "/opt/cougaar-*" installations you can:
      <ol>
        <li>Move your "/opt/cougaar/sys" directory to the base directory:
           <pre>
              mv sys ../sys
           </pre></li>
        <li>Create a symbolic link to the moved directory:
           <pre>
              ln -s ../sys sys
           </pre>
           <i>OR</i> you can set the "$COUGAAR3RDPARTY" environment variable
           to "/opt/sys", as <a href="#cougaarEnv">noted below</a>.
           </li>
      </ol></li><p>

  <li>Next you need to have your <a href="../../doc/details/DataAccess.html">cougaar.rc</a> available for your
    <a href="http://www.cougaar.org">Cougaar</a>
    installation.  Previously we placed this file in "/tmp",
    and here we move it to "configs/common":
       <pre>
       mv /tmp/cougaar.rc configs/common
       </pre>
    Make sure you don't have a <a href="../../doc/details/DataAccess.html">cougaar.rc</a> in your home directory:
       <pre>
       ls ~/cougaar.rc ~/.cougaarrc
       </pre>
    Remove or rename any matches to the above files, since these would
    override your "/opt/cougaar/configs/common/cougaar.rc" and could
    contain incorrect database information.  Alternately you can keep
    your <a href="../../doc/details/DataAccess.html">cougaar.rc</a> only in your home directory -- just make sure that 
    <a href="http://www.cougaar.org">Cougaar</a>
    finds the appropriate file.</li><p>

  <li>If you plan to run CSMART with metrics and use the Inventory Manager,
    which is typical, you must modify "configs/common/LDMDomains.ini"
    to include the CSMART domain.  Append this line to the end
    of the file:
       <pre>
      csmart=org.cougaar.tools.csmart.runtime.ldm.CSMARTDomain
       </pre>
    An example "LDMDomains.ini" is kept in "csmart/data/common".</li><p>

  <li>(Optional) Metrics also require the installation of a JNI (native-code) 
    library.  See "scalability/bin/Install.txt" for details.  If you do
    not install these libraries then Metrics will be unable to gather some
    machine-specific information (CPU-cycle counters, etc).</li><p>
    
  <li>Note: CSMART and the 
    <a href="http://www.cougaar.org">Cougaar</a>
    Nodes share several Java class files in
    common, so these must be compatible builds.  The easiest way to guarantee
    this is to use the same installation version on all machines.</li><p>
  </ol>
</li><p>

<br>

<a name="cougaarEnv">
<li><font size=+1><b>To set your 
<a href="http://www.cougaar.org">Cougaar</a>
environment variables:</b></font></a>
    <p>
    Set the following environment variables:
       <pre>
       setenv COUGAAR_INSTALL_PATH /opt/cougaar
       setenv COUGAAR_DEV_PATH
       </pre>
    <p>
    The COUGAAR_INSTALL_PATH variable specifies the base directory for your 
    cougaar installation.
    <p>
    The second variable, COUGAAR_DEV_PATH is set to no value to explicitly 
    make sure it is not set.  Developers can use the COUGAAR_DEV_PATH to
    prefix the Java Classpath with custom (debugging) Java Class files 
    or jars.  
    <p>
    If you unpacked "cougaar-support" into a directory other than 
    "$COUGAAR_INSTALL_PATH/sys", and didn't create a symbolic link to this
    directory, then you must set the COUGAAR3RDPARTY variable to that
    directory.  For example:
       <pre>
       setenv COUGAAR3RDPARTY /opt/sys
       </pre>
    This is typically not required.
</li><p>

<br>

<a name="minitest">
<li><font size=+1><b>To verify the 
<a href="http://www.cougaar.org">Cougaar</a>
installation using 
"minitestconfig":</b></font></a>
  <p> 
   This is a simple verification that 
   <a href="http://www.cougaar.org">Cougaar</a>
   was installed.  This
   does not test CSMART, the AppServer, or your database, and only tests a 
   localhost four-Agent configuration.  See the "minitestconfig" 
   <a href="../../doc/MiniTestConfig.html">documentation</a> in "../../doc/MiniTestConfig.html" for additional details.
  <p>
  <ol> 
  <p>

  <li>Follow the above <a href="#cougaarInst"
      >Cougaar installation</a> and <a href="#cougaarEnv">environment setting</a> steps.</li><p>

  <li>Launch the simple "MiniNode":
       <pre>
       cd $COUGAAR_INSTALL_PATH/configs/minitestconfig
       ../../bin/Node MiniNode
       </pre>
    You should see some UI popups and various output messages to your
    console.</li><p>

  <li>Click on the "Publish OPlan" button, wait about 10 seconds, then click on
    the "Send GLS Root" button.  You should see a bunch of "++--.." messages
    sent to the console output (indicating message flow between agents).  In the window titled
    "AllocationAssessorPlugin for 3-69-ARBN" you should see "21 successful
    allocations".  See "../../doc/MiniTestConfig.html" for further details.</li><p>

  <li>(Optionally) test the <a href="#httpVisuals">HTTP visualizations</a> and 
    <a href="#socMonitor">CSMART "Society Monitor" visualizations</a>.</li><p>

  <li>The test is complete -- your 
    <a href="http://www.cougaar.org">Cougaar</a>
    installation appears to be properly
    configured.  You can use control-C to kill the Node.</li><p>
  </ol>
</li><p>

<br>

<a name="httpVisuals">
<li><font size=+1><b>To use an HTTP browser to view the society:</b></font></a>
  <p>Cougaar includes the <a href="http://jakarta.apache.org/tomcat/">Apache Tomcat</a> servlet server by default. It usually runs on port 8800. For details, see the <a href="../../doc/details/Servlet.html">core documentation</a>. There are a number of servlets loaded by default, and others included in most societies (including the above <a href="#minitest">minitestconfig</a>). To use these:<br><br>
  <ol>
  <li>Open any HTTP browser, such as 
    <a href="http://www.netscape.com">Netscape</a>.</li><p>
  <a name="tasksSVLT"></a>
  <li>Choose the hostname of any host (e.g. "localhost") in your society 
    that's running a Node, and in your browser open this URL:
      <a href="http://localhost:8800/tasks">http://localhost:8800/tasks</a>
    This should create an HTML page that can be used to view the contents
    of an Agent's Blackboard.  Other pages (or servlets) are available. Go to <a href="http://localhost:8800">http://localhost:8800</a> for some basic help, and links to show you the available running servlets. You may also look at the related core <a href="../../doc/details/Servlet.html">servlet documentation</a>, or see the
    <a href="http://www.cougaar.org/documents/pdg.html">Cougaar Developers Guide</a> 
    for further details.</li><p>

  <li>(Optionally) close your browser when you are done.</li><p>

  <li>Additionally there are several Java applications that use HTTP
    to communicate with the society.  See the 
    <a href="http://www.cougaar.org/documents/pdg.html">Cougaar Developers Guide</a>
    for notes on the "Inventory Manager" and "TPFDD" viewers.  See
    "configs/small-135/small-135.readme.html" for details.</li><p>
  </ol>
</li><p>

<br>

<a name="socMonitor">
<li><font size=+1><b>To just use the CSMART Society Monitor UIs:</b></font></a>
  <p>
   CSMART contains several UIs that can be used independent of the full CSMART
   society contruction/management and AppServer.  These UIs can be used with
   the above "minitestconfig" society as a simple example.
  <p>
  <ol>
  <p>

  <li>Follow the above <a href="#cougaarInst"
      >Cougaar installation steps</a> and Cougaar <a href="#cougaarEnv">environment setting</a> steps.</li><p>

  <li>The CSMART Society Monitor is now ready to run by using:
       <pre>
       cd $COUGAAR_INSTALL_PATH/csmart/bin
       ./Monitor
       </pre></li><p>

  <li><b>Note</b>: A society must be running at this time.</li><p>

  <li>The Monitor will ask for the URL of the "society".  You can enter the
    hostname of any host that is running a Node of your society, such
    as: <a href="http://localhost:8800/">http://localhost:8800/</a></li><p>

  <li>See the CSMART on-line documentation or the User's Guide, section 7 for instructions on how to use the various
    monitor tools.</li><p>

  <li>Several of these UIs make use of the 3rd-party 
    <a href="http://www.research.att.com/sw/tools/graphviz">Grappa</a> 
    graphical layout 
    engine, which calls the program <tt>csmart/bin/dot-l386</tt> 
    (<tt>csmart/bin/dot.exe</tt> for WinNT).  Note that large queries 
    (1000+ objects) can be slow and consume lots of memory.  Often it
    is best to start with the <a href="#tasksSVLT">Tasks servlet</a> to find
    a single starting-point Task, then use the CSMART Society Monitor's
    "Thread view" to display that Task.</li><p>

  <li>Close the Society Monitor window when you are done.</li><p>
  </ol>
</li><p>

<br>

<a name="appServer">
<li><font size=+1><b>To configure the AppServer:</b></font></a>
  <p>
   The AppServer is a remote process manager that is used by the CSMART UI to
   create and destroy 
   <a href="http://www.cougaar.org">Cougaar</a>
   Node processes. You will need one AppServer installation on each host on which you wish to run Cougaar Nodes via CSMART.
  <p>
  <ol>
  <p>

  <li>Follow the above <a href="#cougaarInst">Cougaar installation
  steps</a> on each machine where you will run Nodes.</li><p>

  <li>The AppServer does not use the 
    <a href="http://www.cougaar.org">Cougaar</a>
    environment variables.  Its
    configuration is fully specified in a <i>.props</i> file, which is detailed
    below and in <tt><a href="../../server/doc/README">server/doc/README</a></tt>.</li><p>

  <li>Copy the template <tt>server/data/unix-server-sample.props</tt> file (or <tt>win-server-sample.props</tt> as appropriate) to
    <tt>server/bin/server.props</tt>.  To copy:
        <pre>
        cp server/data/unix-server-sample.props server/bin/server.props
        </pre>
  <li>You may need to alter your <tt>server/bin/server.props</tt>.  This file defines the 
    <a href="http://www.cougaar.org">Cougaar</a>
    installation 
    properties -- if you used directory names other than <tt>/opt/cougaar</tt>,
    then you must modify this file.  You may also set various properties by default.  For
    example, one can alter the logging level by changing a property in the
    "server.props".  See the "server.props" for details. (Note that you may use a name other than "server.props", in which case you must provide the server startup script with the relative path to your server properties file when you invoke the script.)</li><p>

  <li>(Optional) Developers may want to turn on the AppServer "verbose" 
    debugging option, which is set in the "Server" script.  See the "Server"
    script for details.</li><p>

  <li>The server is now ready to run by using:
      <pre>
       cd server/bin
       ./Server [optional: server properties file name]
      </pre>
    You do not need to do this until CSMART first attempts to launch a
    Node.  For simplicity you can start the AppServer well in advance.
    A host only needs one AppServer running for CSMART to launch one or more
    Nodes on that host, for one or more experiment run.  CSMART communicates
    with multiple host/AppServers to launch and coordinate a distributed
    experiment.<br>Note that some Cougaar applications will write text files to the directory from which you start the AppServer.</li><p>
  </ol>
</li><p>

<br>

<a name="csmartConfig">
<li><font size=+1><b>To configure CSMART:</b></font></a>
  <p>
   The CSMART UI is a tool for creating 
   <a href="http://www.cougaar.org">Cougaar</a>
   societies, configuring the
   society to form an "experiment", running the experiment using the AppServer, 
   and for monitoring the society and analysis of results.
  <p>
  <ol>
  <p>

  <li>After fully <a href="#cougaarInst">installing</a> Cougaar and
  testing your <a href="#minitest">installation</a> with minitestconfig (and installing a
  <a href="#dbInst">database</a> if necessary), you are ready for CSMART.</li><p>
  
  <a name="excelPath"></a>
  <li>You may need to modify the supplied "CSMART" or "CSMART.bat" startup script in csmart/bin.  For example, a Java System
    Property 
    "org.cougaar.tools.csmart.excelpath=.." specifies the path to
    Excel that is later used to 
    <a href="#analyzeResults">analyze performance metrics</a>.</li><p>

  <li>Some third party plugins may use Swing GUIs. No core plugins do
  this, for the preferred mechanism is to use servlets.  But if you
  expect to use such plugins, then for all the machines that you will
  use as AppServers, you must explicitly allow UI popups to appear on
  your CSMART machine.  This can wait until
    just before you start a run.  Here we will use "localhost" to run our society 
    and we'll allow localhost popups in advance:
       <pre>
       xhost +localhost
       </pre>
    <b>Note</b> This must be done even if you're only using
    "localhost". On Windows machines, you may need to edit your local
    xhosts.txt file (see your server documentation).</li><p>

  <li>CSMART allows users to create Recipes, whose functionality is
  driven by database queries. These user-defined queries can be copied
  from those in "CIP/configs/common/PopulateDb.q". However, they
  should be copied into a new user-local file, called
  "recipeQueries.q". This file can be placed anywhere on the Cougaar
  Configuration path. Typically, users put this in the same place as
  their cougaar.rc file, CIP/configs/common.</li><p>

  <li>(Optional) CSMART uses <a
  href="http://jakarta.apache.org/log4j">log4j</a> to log all
  messages, warnings, and errors. Users may want to tune how verbose
  the logging is. All logging is package specific and can be
  controlled by the debug.properties file located in
  csmart/data/common.<br>
  For detailed configuration options, see log4j specific documentation.  Default logging
   is displayed on the Console (where CSMART was started) and only displays log messages of
   priority WARN or Higher.  All logs are also, by default, output to a file: csmart.log which
   is in the Current Working Directory.  This file is a rolling logfile that will role at a
   size of: 1024KB.
  <p>
  The only options that a user may want to modify in the debug.properties file are:
  <ol>
    <li>Change the Log Level<br>
  To change the log level for the entire society Change:
  <tt>log4j.rootCategory=WARN, stdout, rolling</tt>
  in the debug.properties file to the desired log level.
  FATAL > ERROR > WARN > INFO > DEBUG
    </li>
    <li>Change Log Level for a specific package.<br>
       To change the logging level for a specific package.  Add a line like:
       <tt>log4j.category.org.cougaar.tools.csmart.ui.console=DEBUG</tt> with the
       desired package name and debug level to the debug.properties file.
    </li>
  </ol>
  </li><br>

  <li>CSMART is now ready to run by using:
       <pre> 
       cd $COUGAAR_INSTALL_PATH/csmart/bin
       ./CSMART
       </pre></li><p>
  </ol>
</li>
<br>
<a name="csmartRun">
<li><font size=+1><b>Example run of CSMART:</b></font></a>
  <p>
  These notes detail how to configure and run the standard two-Node 
  "TINY-1AD + TRANSPORTATION" society on a single machine.  It is assumed in
  these notes that only one society will be run on the machines at a time.
  <p>
  <ol>
  <p>

  <li>Follow the above 
    <a href="http://www.cougaar.org">Cougaar</a>
    , AppServer, and CSMART installation
    steps.</li><p>

  <li>Start CSMART as noted above.  The main CSMART UI will popup (see section 2 of the User's Guide).</li><p>

  <li>(Optional) Many CSMART windows have "help" menus with on-line 
    documentation.</li><p>

  <li>To create a new experiment from a database (also see section 3 of the User's Guide):
    <ol>
    <li>Select "Default Workspace". This is where experiments and societies are stored.</li><p>

    <li>Right-click, select "New Experiment".</li><p>

    <li>Select an experiment, "TINY-1AD-TRANS" is a simple place to start.   Then a UI to select "Threads &amp; Groups" will popup.</li><p>

    <li>Configure the "Threads &amp; Groups".  In this screen, you may
    modify the set of threads (military classes of supply) which the
    society will process.  Note however, that you <em>must</em> select
    at least one thread.  For a simple test, select "Class 1"
    (food).</li><p>

    <li>Give the experiment a name, such as "My Test", then click "Yes" to save
      your modified name.  Your experiment name, "My Test", is added
      to the list in the "Default Workspace".  A recipe, Default Servlets is also
      added to the workspace.  This recipe defines the servlets that are a default
      part of this experiment.</li><p>
    </ol>
  </li><p>

  <li>You may also add run-time performance metric collection to your
  society. (See section 5 of the User's Guide.) A metric is a kind of
  Recipe. Recipes are rules for adding components to a society.  To
  (optionally) create a new recipe for an experiment:
    <ol>
    <li>Select "Default Workspace".</li><p>

    <li>Right-click, select "New Recipe", select "Built in", select "Basic Metric", then
      "OK".</li><p>

    <li>Give the metric a name -- "My Metric" is fine for this test.</li><p>

    <li>Later in the experiment configuration the metric will be
    added to the experiment.</li><p>
    </ol>
  </li><p>

  <li>To configure an experiment (See section 5 of the User's Guide):
    <ol>
    <li>Select an experiment from the "Default Workspace".  For this
      test select "My Test".</li><p>

    <li>Click on "Experiment Builder".  A new "Configuration" UI will
      popup.</li><p>

    <li>To (optionally) add a recipe to this experiment (like the metric you just created):
       <ol>
       <li>Click on the "Properties" tab.  A folder for "Recipes" is
         displayed.</li><p>

       <li>Bring the original "CSMART" UI window to the front and select
         your "My Metric" recipe, as created in the "To create a new
         recipe for an Experiment" notes.</li><p>

       <li>Drag the "My Metric" onto the "Recipes" folder of the
         "Properties" panel, from the Default Workspace.</li><p>

       <li>The recipe is now associated with the experiment.</li><p>
       </ol>
     </li><p>

    <li>Click on the "Configurations" tab.  This will display a
      three-panel window for "Agent-&gt;Node-&gt;Host" mapping.  Stretch the
      window to make it larger, which will facilitate the following
      steps.</li><p>

    <li>Select "GLM_TRANS" from the middle ("Nodes") panel.</li><p>

    <li>Select the following seven Agents from the bottom ("Agents") panel.
      Use the control-key to select multiple Agents:
      <ul>
          <li>CONUSGround</li>
          <li>GlobalAir</li>
          <li>GlobalSea</li>
          <li>PlanePacker</li>
          <li>ShipPacker</li>
          <li>TRANSCOM</li>
          <li>TheaterGround</li>
      </ul></li><p>

    <li>Drag these selected Agent names to the "TRANSCOM_NODE" of the
      middle ("Nodes") panel.</li><p>

    <li>Select "1AD-Tiny" of the middle ("Nodes") panel.</li><p>

    <li>Select the remaining 25 Agents and drag them onto
      "1AD-Tiny".  Use the shift-key to select a range of
      names.</li><p>

    <li>Select your machine's address from the top ("Hosts") panel.  If
      your machine's name is not present then right-click in the top
      panel to add a new entry.  Make sure that you use either the
      full host name or the IP address -- sometimes the DNS lookup
      causes problems.</li><p>

    <li>Drag both "GLM_TRANS" and "1AD-TINY" onto your host
      entry of the top ("Hosts") panel.  If you were testing a
      multi-machine configuration then you would drag the Nodes onto
      multiple hosts.</li><p>

    <li>At this point, you can set various properties on the Nodes or
    Hosts. Most significantly, you can specify the run-time Java
    properties with which the Nodes will run. To do so, right-click on
    the Node you want to modify. From the pop-up menu, select the
    "Command Line Argument" option. A new window appears, listing all
    of the command line arguments which you can edit, or to which you
    can add.<br><br>
    <b>Note:</b> Be careful of editing the existing arguments unless
    you know what you are doing.</li><p>  

    <li>On the top menu, select "File", then "Save".  The configuration
      is saved to the database under the experiment name you provided,
      for later re-use.</li><p>

    <li>On the top menu, select "File", then "Close".  The UI popup for
      configuration is closed.</li><p>
    </ol>
  </li><p>

  <li>To run an experiment (see section 6):

    <ol>
    <li>Select an experiment from the "Default Workspace".  For this
      test select "My Test".</li><p>

    <li>Click on the "Experiment Controller" button.  A new "Experiment
      Control" UI is created.</li><p>

    <li><b>IMPORTANT</b>: At this point an AppServer must be running on all the machines
      that will run Nodes.  See the above installation guide for the
      AppServer.  The AppServer starts with a "Server running" message.</li><p>

    <li>Click on the "Run" button.</li><p>

    <li>At this point the AppServer will print out a "Create Node"
      debugging message.  This output can be ignored.</li><p>

    <li>Three minimized icons are created in the "Experiment Controller"
      window; one for each host and one for the GLS Servlet.  Double Click on both 
      Node Windows to see the Node output.  These output panels can be streched 
      to 80 columns to
      make viewing easier.  Log files of the output are written to
      the <tt>$CIP/results</tt> directory that you specified. You can set
      notifications to monitor the Node output, filter that output,
      and many other things. See the on-line documentation or section
      6 of the User's Guide for details.</li><p>

    <li>In the output panels you should see a "@NODE_CREATED" message,
      followed by the 
      <a href="http://www.cougaar.org">Cougaar</a>
      build identification.</li><p>

    <li>Troubleshooting: If the run immediately ended and failed, check the AppServer's output
      for details of the command line that was attempted.  Sometimes one can
      debug the configuration by cutting &amp; pasting the command line into a
      console window.  Double-check your "server/bin/server.props".</li><p>

    <li>Double Click on the GLS Window in the Experiment Controller.
      <pre>
        - click on "Connect"
        - click on "Publish OPlan"
        - wait about 10 seconds (output in the Node windows slows)
        - click on "Send GLS Root"
        - let the society run for a while until it "settles".
      </pre></li><p>

    <li>You may use an HTTP browser to view the society.  See the above notes on
    <a href="#httpVisuals">HTTP browser visualizations</a>.</li><p>

    <li>To use the society monitors (see the CSMART User's Guide, section 7):
      <ol>
      <li>Minimize the "Experiment Controller" UI window, raise the original
        "CSMART" UI window, and click on "Society Monitor".  A new
        "Society Monitor" UI window is created.  Your society is still
        running in the "Experiment Controller" window.</li><p>

      <li>See the above <a href="#socMonitor">"Society Monitor" documentation</a> 
        for notes on using the society monitors.</li><p>
        
      <li>Close the "Society Monitor" window when you are done.  Raise the 
        "Experiment Monitor" window to the front again.</li><p>
      </ol>
    </li><p>

    <li>Click on the "Stop" button to kill the Nodes and finish the
      experiment run.</li><p>

    <li>The AppServer notes "Node finished &lt;name&gt;".</li><p>

    <li>The AppServer can now be killed by using control-C, or you can
      leave the AppServer running if you are planning another run.</li><p>

    <li>The "Experiment Monitor" colors the Node activity indicators
      red, which signals that the experiment has finished.</li><p>

    <li>Close the "Experiment Monitor" window.</li><p>
  </ol>
  </li>
  
  <br>
  <li><a name="analyzeResults">To analyze the results of an Experiment (see section 8 of the User's Guide):</a>
    <ol>
    <li>This is only useful if a metrics was selected during experiment
     configuration.</li><p>

    <p>

    <li>Click on the "Performance Analyzer" button.  A UI window for
       "Excel" is created.</li><p>

    <li>Click on the "Excel" button.  A file-finder window is created,
      which you can use to find your metrics files.  The metrics are
      then loaded into <a href="#excelPath">Excel</a>.</li><p>

    <li>Close the "Performance Analyzer" window when you are done.</li><p>
    </ol>
  </li><p>

  <li>To exit CSMART:
    <ol>
    <li>Close the main "CSMART" UI window.</li><p>
    </ol>
  </li>
</ol>
</li>
<br><br>

</body>
</html>
